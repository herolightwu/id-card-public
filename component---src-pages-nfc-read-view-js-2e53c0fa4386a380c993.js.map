{"version":3,"sources":["webpack:///./src/pages/nfc-read/view.js","webpack:///./src/pages/scan-card/view.js"],"names":["props","dispatch","useDispatch","classes","useSelector","state","app","userData","useStyles","theme","useTheme","transitionDuration","enter","transitions","duration","enteringScreen","exit","leavingScreen","isDesktop","useMediaQuery","menuIndex","defaultFields","serverURL","label","placeholder","type","name","ViewCard","onNext","navigate","onSave","onCancel","setFieldValues","setState","openOrderConfirm","showEditButton","barcode","sel_card","webp","compressed_face_image","photo","face_image","showError","onConfirmOrder","onPrint","isLogin","formFields","resultTitle","openResultDlg","loader","isPhotoChanged","location","created_user","card_program","val","fields","this","i","length","value","componentDidMount","basicData","getCreatedUser","getCardProgram","valFields","program_template","formfields","ind","toString","toLowerCase","replace","push","console","log","Object","entries","forEach","key","index","headers","localStorage","getItem","Promise","resolve","card_URL","axios","get","then","response","user_data","data","catch","error","finally","program_id","prog_data","getCardById","card_id","db_data","setFieldValuesFromDB","render","btnStyle","width","float","marginLeft","marginRight","marginBottom","minWidth","rightGridStyle","container","justify","spacing","style","minHeight","item","sm","xs","className","cardViewGridLeft","editMode","first_name","middle_name","last_name","statesel_card","ordered_date","onChanged","changedWebp","changedPhoto","cardViewGrid","padding","elevation","map","one","disable","showErr","Utils","getKey","bind","md","display","flexDirection","justifyContent","alignItems","flexWrap","variant","size","color","onClick","disabled","in","timeout","transitionDelay","unmountOnExit","aria-label","position","bottom","right","src","EditImg","objectFit","marginTop","title","open","okTitle","onOk","cancel","backdrop","React","Component"],"mappings":"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","file":"component---src-pages-nfc-read-view-js-2e53c0fa4386a380c993.js","sourcesContent":["import React from 'react'\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport useStyles from '../../utils/styles'\r\nimport { useTheme } from '@material-ui/core'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport {ViewCard} from '../scan-card/view'\r\n\r\n\r\nexport default function(props) {\r\n  const dispatch = useDispatch()\r\n  const userData = useSelector(state => state.app.userData)\r\n  const classes = useStyles()\r\n\r\n  const theme = useTheme()\r\n  const transitionDuration = {\r\n    enter: theme.transitions.duration.enteringScreen,\r\n    exit: theme.transitions.duration.leavingScreen,\r\n  }\r\n\r\n  // const isDesktop = useMediaQuery(theme.breakpoints.up('md'))\r\n  const isDesktop = useMediaQuery('(min-width:1053px)')\r\n\r\n  return (\r\n    <ViewCard\r\n      {...props}\r\n      menuIndex = {1}\r\n      dispatch={dispatch}\r\n      isDesktop={isDesktop}\r\n      //   userData={userData}\r\n      classes={classes}\r\n      transitionDuration={transitionDuration}\r\n    />\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport { navigate } from 'gatsby'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Button from '@material-ui/core/Button'\r\nimport useStyles from '../../utils/styles'\r\nimport { MainLayout } from '../../components/Layout'\r\nimport { Backdrop, CircularProgress, Grid, Paper, useTheme } from '@material-ui/core'\r\nimport CardFrontBack from '../../components/scan-card/CardFrontBack'\r\nimport Zoom from '@material-ui/core/Zoom'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\nimport Utils from '../../utils/utils'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport EditImg from '../../assets/images/edit.png'\r\nimport FilledTextInput from '../../components/scan-card/FilledTextInput'\r\nimport { ConfirmDlg } from '../../components/Dialog/PhotoPickerDlg'\r\n\r\nimport axios from 'axios'\r\nimport { serverURL } from '../../utils/RestAPI'\r\n\r\nconst API_URL = serverURL + '/api'\r\n\r\nconst defaultFields = [\r\n  {\r\n    label: 'Card Program',\r\n    placeholder: 'Card Program Name',\r\n    type: 'text',\r\n    name: 'program_name',\r\n  },\r\n  {\r\n    label: 'Card ID',\r\n    placeholder: 'Card ID Number',\r\n    type: 'text',\r\n    name: 'card_id',\r\n  },\r\n  {\r\n    label: 'Card Status',\r\n    placeholder: 'Status',\r\n    type: 'text',\r\n    name: 'available',\r\n  },  \r\n]\r\n\r\nexport class ViewCard extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      isLogin: true,\r\n      showEditButton: true,\r\n      formFields: defaultFields,\r\n      openOrderConfirm: false,\r\n      resultTitle: '',\r\n      openResultDlg: false,\r\n      loader: false,\r\n      isPhotoChanged:false,\r\n      webp:props.location.state.compressed_face_image,\r\n      photo:props.location.state.face_image,\r\n      showError:{},\r\n      barcode:'',\r\n      created_user:{},\r\n      card_program:{},\r\n      sel_card:{},\r\n    }\r\n  }\r\n\r\n  formFields (val, placeholder) {\r\n    let fields = this.state.formFields\r\n    for (let i = 0; i < fields.length; i++) {\r\n      if (fields[i].placeholder == placeholder){\r\n        fields[i].value = val \r\n      }\r\n    }    \r\n  }\r\n\r\n  componentDidMount() {\r\n    const { dispatch, userData, basicData } = this.props\r\n    \r\n    this.setState({\r\n      barcode:this.props.location.state.barcode,\r\n    })\r\n    this.getCreatedUser()\r\n    this.getCardProgram()\r\n  }\r\n\r\n  setFieldValues() {\r\n    let valFields = this.state.card_program.program_template\r\n    let formfields = defaultFields\r\n    \r\n    for(let ind = 0; ind < valFields.length; ind++){\r\n      valFields[ind].name = valFields[ind].label.toString().toLowerCase().replace(/\\s/g, '_')\r\n      formfields.push(valFields[ind])\r\n    }\r\n    console.log(\"form fileds :\", formfields)\r\n\r\n    Object.entries(this.props.location.state).forEach(([key, value]) => {\r\n      for(let index = 0; index < formfields.length; index++){\r\n        if (key == formfields[index].name){\r\n          formfields[index].value = value\r\n        }\r\n      }\r\n    })\r\n\r\n    this.setState({formFields: formfields, sel_card: this.props.location.state})\r\n  }\r\n\r\n  getCreatedUser(){\r\n    const token = localStorage.getItem('token');\r\n    const beartoken = \"Bearer \" + token;\r\n    const headers = { \r\n      'Authorization': beartoken\r\n    };\r\n\r\n    return new Promise(resolve => {\r\n      const card_URL = serverURL + '/api/users/'+this.props.location.state.created_user;\r\n      axios.get(card_URL, { headers })\r\n      .then(response => {\r\n        const user_data = response.data.data;\r\n        \r\n        this.setState({created_user: user_data[0]})\r\n        resolve(user_data[0]);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        navigate('/manage-cards/')\r\n        return null;\r\n      }) \r\n      .finally(()=>{\r\n      })\r\n    })\r\n  }\r\n\r\n  getCardProgram() {\r\n    const token = localStorage.getItem('token');\r\n    const beartoken = \"Bearer \" + token;\r\n    const headers = { \r\n      'Authorization': beartoken\r\n    };\r\n\r\n    return new Promise(resolve => {\r\n      const card_URL = serverURL + '/api/cardprogram/'+this.props.location.state.program_id;\r\n      axios.get(card_URL, { headers })\r\n      .then(response => {\r\n        const prog_data = response.data.data;\r\n        \r\n        this.setState({card_program: prog_data[0]}, ()=>{\r\n          this.setFieldValues()\r\n        })\r\n        resolve(prog_data[0]);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        navigate('/scan-card/')\r\n        return null;\r\n      }) \r\n      .finally(()=>{\r\n      })\r\n    })\r\n  }\r\n\r\n  getCardById(){\r\n    const token = localStorage.getItem('token');\r\n    const beartoken = \"Bearer \" + token;\r\n    const headers = { \r\n      'Authorization': beartoken\r\n    };\r\n\r\n    return new Promise(resolve => {\r\n      const card_URL = serverURL + '/api/cards/'+this.props.location.state.card_id;\r\n      axios.get(card_URL, { headers })\r\n      .then(response => {\r\n        const db_data = response.data.data;\r\n        \r\n        this.setState({sel_card: db_data[0]}, ()=>{\r\n          this.setFieldValuesFromDB()\r\n        })\r\n        resolve(db_data[0]);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        this.setFieldValues()\r\n      }) \r\n      .finally(()=>{\r\n      })\r\n    })\r\n  }\r\n\r\n  setFieldValuesFromDB() {\r\n    let valFields = this.state.card_program.program_template\r\n    let formfields = defaultFields\r\n    \r\n    for(let ind = 0; ind < valFields.length; ind++){\r\n      valFields[ind].name = valFields[ind].label.toString().toLowerCase().replace(/\\s/g, '_')\r\n      formfields.push(valFields[ind])\r\n    }\r\n    console.log(\"form fileds :\", formfields)\r\n\r\n    Object.entries(this.state.sel_card).forEach(([key, value]) => {\r\n      for(let index = 0; index < formfields.length; index++){\r\n        if (key == formfields[index].name){\r\n          formfields[index].value = value\r\n        }\r\n      }\r\n    })\r\n\r\n    this.setState({formFields: formfields})\r\n  }\r\n\r\n  onNext = () => {\r\n    navigate('/scan-card/')\r\n  }\r\n\r\n  onSave = () => {}\r\n\r\n  onCancel = () => {\r\n    this.setFieldValues()\r\n\r\n    this.setState({ \r\n      openOrderConfirm: false, \r\n      showEditButton: true,\r\n      barcode:this.state.sel_card.barcode,\r\n      webp:this.state.sel_card.compressed_face_image,\r\n      photo:this.state.sel_card.face_image,\r\n      showError:false\r\n    })\r\n  }\r\n\r\n  onConfirmOrder = () => {}\r\n\r\n  onPrint = () => {}\r\n\r\n  render() {\r\n    const { userData, classes, transitionDuration, isDesktop } = this.props\r\n\r\n    const buttonWidth = isDesktop ? '50%' : 120\r\n\r\n    const btnStyle = {\r\n      width: buttonWidth,\r\n      float: 'right',\r\n      marginLeft: 5,\r\n      marginRight: 5,\r\n      marginBottom: 20,\r\n      minWidth: 120,\r\n    }\r\n\r\n    const rightGridStyle = isDesktop\r\n      ? {\r\n          minWidth: 150,\r\n        }\r\n      : {\r\n          minWidth: '90vw',\r\n        }\r\n        \r\n    return (\r\n      <MainLayout menuIndex={this.props.menuIndex}>\r\n        <Grid\r\n          container\r\n          justify=\"center\"\r\n          spacing={2}\r\n          style={{ minHeight: '100%' }}\r\n        >\r\n          <Grid item sm={4} xs={12} className={classes.cardViewGridLeft}>\r\n          <CardFrontBack editMode={!this.state.showEditButton}\r\n                      card_id={this.state.sel_card.card_id}\r\n                      program_id={this.state.card_program.program_id}\r\n                      first_name={this.state.sel_card.first_name}\r\n                      middle_name={this.state.sel_card.middle_name}\r\n                      last_name={this.state.sel_card.last_name}\r\n                      webp={this.state.sel_card.webp}\r\n                      photo={this.statesel_card.photo} \r\n                      ordered_date={this.state.sel_card.ordered_date} \r\n                      barcode={this.state.sel_card.barcode} \r\n                      onChanged={(changedWebp, changedPhoto) => {\r\n                            console.log('picture changed')\r\n                            this.setState({\r\n                              isPhotoChanged:true,\r\n                              webp:changedWebp,\r\n                              photo:changedPhoto,\r\n                            })\r\n                      }}/>\r\n          </Grid>\r\n          <Grid\r\n            item\r\n            sm={5}\r\n            xs={12}\r\n            className={classes.cardViewGrid}\r\n            style={{ marginRight: 5 }}\r\n          >\r\n            <Paper style={{ padding: '0 10px' }} elevation={0}>\r\n              {this.state.formFields.map((one, index) => {\r\n                let disable = true\r\n                let showErr = ''\r\n                if(one.name && !this.state.showEditButton){\r\n                  disable = false\r\n                  showErr = this.state.showError[one.name];\r\n                }\r\n                return (\r\n                  <FilledTextInput\r\n                    key={Utils.getKey()}\r\n                    label={one.label}\r\n                    type={one.type}\r\n                    value ={one.value}\r\n                    placeholder={one.placeholder}\r\n                    formFields={this.formFields.bind(this)}\r\n                    showError={showErr} \r\n                    disable={disable}\r\n                  />\r\n                )\r\n              })}\r\n            </Paper>\r\n          </Grid>\r\n          <Grid\r\n            item\r\n            md={3}\r\n            sm={12}\r\n            className={classes.cardViewGrid}\r\n            style={rightGridStyle}\r\n          >\r\n            <Paper\r\n              style={{\r\n                padding: 10,\r\n                display: 'flex',\r\n                width: '100%',\r\n\r\n                flexDirection: isDesktop ? 'column' : 'row',\r\n                justifyContent: 'center',\r\n                alignItems: isDesktop ? 'stretch' : 'center',\r\n                flexWrap: isDesktop ? 'nowrap' : 'wrap',\r\n              }}\r\n              elevation={0}\r\n            >\r\n              {this.state.showEditButton ? (\r\n                <>\r\n                  <div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      size=\"medium\"\r\n                      color=\"primary\"\r\n                      style={btnStyle}\r\n                      onClick={this.onNext}\r\n                    >\r\n                      Next Card\r\n                    </Button>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      size=\"medium\"\r\n                      color=\"primary\"\r\n                      style={btnStyle}\r\n                      onClick={this.onPrint}\r\n                    >\r\n                      Print\r\n                    </Button>\r\n                  </div>\r\n                  <div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      size=\"medium\"\r\n                      color=\"primary\"\r\n                      style={btnStyle}\r\n                    >\r\n                      Write NFC\r\n                    </Button>\r\n                  </div>\r\n                  <div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      size=\"medium\"\r\n                      color=\"secondary\"\r\n                      style={btnStyle}\r\n                    >\r\n                      Reject\r\n                    </Button>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      size=\"medium\"\r\n                      color=\"primary\"\r\n                      style={btnStyle}\r\n                      onClick={this.onSave}\r\n                      disabled={this.state.showEditButton}\r\n                    >\r\n                      update\r\n                    </Button>\r\n                  </div>\r\n                  <div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      size=\"medium\"\r\n                      color=\"primary\"\r\n                      style={btnStyle}\r\n                      onClick={onCancel}\r\n                    >\r\n                      cancel\r\n                    </Button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Zoom\r\n          key={Utils.getKey()}\r\n          in={this.state.showEditButton}\r\n          timeout={transitionDuration}\r\n          style={{\r\n            transitionDelay: `${500}ms`,\r\n          }}\r\n          unmountOnExit\r\n        >\r\n          <Fab\r\n            aria-label={''}\r\n            style={{ position: 'fixed', bottom: 20, right: 30 }}\r\n            color={'primary'}\r\n            onClick={() => {\r\n              this.setState({ showEditButton: !this.state.showEditButton })\r\n            }}\r\n          >\r\n            <img\r\n              src={EditImg}\r\n              style={{ width: 25, objectFit: 'contain', marginTop: 25 }}\r\n            />\r\n          </Fab>\r\n        </Zoom>\r\n        <ConfirmDlg\r\n          title='You are about to update this card, Are you sure you want to do this?'\r\n          open={this.state.openOrderConfirm}\r\n          okTitle='Update'\r\n          onOk={this.onConfirmOrder}\r\n          onCancel={this.onCancel}\r\n        />\r\n        <ConfirmDlg\r\n          title={this.state.resultTitle}\r\n          open={this.state.openResultDlg}\r\n          okTitle='OK'\r\n          cancel=''\r\n          onOk={()=>{\r\n            this.setState({ \r\n              showEditButton: true,\r\n              openResultDlg: false\r\n            })\r\n          }}\r\n          onCancel={() => {\r\n            this.setState({ \r\n              showEditButton: false,\r\n              openResultDlg: false\r\n            })\r\n          }}\r\n        />\r\n\r\n        <Backdrop className={classes.backdrop} open={this.state.loader}>\r\n          <CircularProgress color='inherit' />\r\n        </Backdrop>\r\n      </MainLayout>\r\n    )\r\n  }\r\n}\r\n\r\nexport default function(props) {\r\n  const dispatch = useDispatch()\r\n  const userData = useSelector(state => state.app.userData)\r\n  const classes = useStyles()\r\n\r\n  const theme = useTheme()\r\n  const transitionDuration = {\r\n    enter: theme.transitions.duration.enteringScreen,\r\n    exit: theme.transitions.duration.leavingScreen,\r\n  }\r\n\r\n  // const isDesktop = useMediaQuery(theme.breakpoints.up('md'))\r\n  const isDesktop = useMediaQuery('(min-width:1053px)')\r\n\r\n  return (\r\n    <ViewCard\r\n      {...props}\r\n      menuIndex={0}\r\n      dispatch={dispatch}\r\n      isDesktop={isDesktop}\r\n      //   userData={userData}\r\n      classes={classes}\r\n      transitionDuration={transitionDuration}\r\n    />\r\n  )\r\n}\r\n"],"sourceRoot":""}