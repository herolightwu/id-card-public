(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"947B":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("YKvs"),r=function(e){return{type:n.a,data:e}}},tRbT:function(e,t,a){"use strict";a("RUBk");var n=a("Ff2n"),r=a("wx14"),i=a("q1tI"),o=a("iuhU"),s=a("H2TA"),c=[0,1,2,3,4,5,6,7,8,9,10],l=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=parseFloat(e);return"".concat(a/t).concat(String(e).replace(String(a),"")||"px")}var m=i.forwardRef((function(e,t){var a=e.alignContent,s=void 0===a?"stretch":a,c=e.alignItems,l=void 0===c?"stretch":c,d=e.classes,m=e.className,u=e.component,g=void 0===u?"div":u,p=e.container,f=void 0!==p&&p,x=e.direction,h=void 0===x?"row":x,v=e.item,w=void 0!==v&&v,b=e.justify,_=void 0===b?"flex-start":b,S=e.lg,j=void 0!==S&&S,E=e.md,y=void 0!==E&&E,C=e.sm,D=void 0!==C&&C,W=e.spacing,z=void 0===W?0:W,k=e.wrap,O=void 0===k?"wrap":k,M=e.xl,I=void 0!==M&&M,N=e.xs,P=void 0!==N&&N,A=e.zeroMinWidth,R=void 0!==A&&A,T=Object(n.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),B=Object(o.a)(d.root,m,f&&[d.container,0!==z&&d["spacing-xs-".concat(String(z))]],w&&d.item,R&&d.zeroMinWidth,"row"!==h&&d["direction-xs-".concat(String(h))],"wrap"!==O&&d["wrap-xs-".concat(String(O))],"stretch"!==l&&d["align-items-xs-".concat(String(l))],"stretch"!==s&&d["align-content-xs-".concat(String(s))],"flex-start"!==_&&d["justify-xs-".concat(String(_))],!1!==P&&d["grid-xs-".concat(String(P))],!1!==D&&d["grid-sm-".concat(String(D))],!1!==y&&d["grid-md-".concat(String(y))],!1!==j&&d["grid-lg-".concat(String(j))],!1!==I&&d["grid-xl-".concat(String(I))]);return i.createElement(g,Object(r.a)({className:B,ref:t},T))})),u=Object(s.a)((function(e){return Object(r.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var a={};return c.forEach((function(n){var r=e.spacing(n);0!==r&&(a["spacing-".concat(t,"-").concat(n)]={margin:"-".concat(d(r,2)),width:"calc(100% + ".concat(d(r),")"),"& > $item":{padding:d(r,2)}})})),a}(e,"xs"),e.breakpoints.keys.reduce((function(t,a){return function(e,t,a){var n={};l.forEach((function(e){var t="grid-".concat(a,"-").concat(e);if(!0!==e)if("auto"!==e){var r="".concat(Math.round(e/12*1e8)/1e6,"%");n[t]={flexBasis:r,flexGrow:0,maxWidth:r}}else n[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else n[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===a?Object(r.a)(e,n):e[t.breakpoints.up(a)]=n}(t,e,a),t}),{}))}),{name:"MuiGrid"})(m);t.a=u},v2zE:function(e,t,a){"use strict";a.r(t),a.d(t,"CardsDataTable",(function(){return W}));var n=a("dI71"),r=(a("eiRb"),a("q1tI")),i=a.n(r),o=a("Wbzz"),s=a("/MKj"),c=a("YMtY"),l=a("PsDL"),d=a("oCA+"),m=a("bSwy"),u=a.n(m),g=a("7SZd"),p=a("Z3vd"),f=a("pdwK"),x=a("1AYd"),h=a("ADg1"),v=a("cVXz"),w=a("jjAL"),b=a("vDqi"),_=a.n(b),S=a("7oih"),j=a("ydnR"),E=a("tRbT"),y=a("947B"),C=a("CkNY").c+"/api/allcardprograms/",D=[{field:"status",headerName:"Status",width:160},{field:"program_name",headerName:"Program Name",width:300},{field:"date",headerName:"Date Created",width:200}];function W(e){var t=e.data;void 0!==t&&(t=t.map((function(e){return e.id=e.program_id,e})));var a=i.a.useRef({columns:D,rows:t,rowLength:100,maxColumns:4}),n=Object(s.useDispatch)(),r=i.a.useState([]),l=r[0],d=r[1],m=i.a.useState(0),u=m[0],g=m[1],p=i.a.useState([]),f=p[0],x=p[1],h=i.a.useState(10),v=h[0],w=h[1],b=i.a.useState(!1),S=b[0],j=b[1],E=function(e,t){if(l.length>0){var a=l;e&&(a=a.filter((function(t){return t.program_name.includes(e)}))),t&&(a=a.filter((function(e){return e.cardstatus==t}))),function(e){if("undefined"!==e){var t=e.slice(u*v,(u+1)*v).map((function(e){return e.id=e.program_id,e.status="Available",e.program_enabled||(e.status="Disabled"),e.date=e.created_date,e}));x(t)}}(a)}};i.a.useEffect((function(){return function(){j(!0);var e={Authorization:"Bearer "+localStorage.getItem("token")};new Promise((function(t){setTimeout((function(){_.a.get(C,{headers:e}).then((function(e){var a=e.data.data;d(a),t(a)})).catch((function(e){return console.log(e),null})).finally((function(){j(!1)}))}),500*Math.random()+100)}))}(),function(){!1}}),[u,a,v]),i.a.useEffect((function(){E(e.program_name,e.status)}),[e.program_name,e.status,l]);return i.a.createElement("div",{style:{width:"100%"}},i.a.createElement(c.a,{rows:f,columns:D,autoHeight:!0,pagination:!0,pageSize:10,rowsPerPageOptions:[5,10,20],onPageSizeChange:function(e){e.page,e.pageCount;var t=e.pageSize;e.rowCount;w(t)},rowCount:100,checkboxSelection:!0,paginationMode:"server",onPageChange:function(e){g(e)},loading:S,onCellClick:function(e,t){console.log("cellData : ",e.row),function(e){var t={program_id:e.program_id,program_name:e.program_name,program_enabled:e.program_enabled,program_template:e.program_template,matrix_size:e.matrix_size,compression:e.compression,logo:e.logo,card_image_front:e.card_image_front,card_image_back:e.card_image_back,edac:e.edac,pxpcw:e.pxpcw,sampleWidth:e.sample_width,created_date:e.created_date};n(Object(y.a)(e)),Object(o.navigate)("/admin/card-programs/view",{state:t})}(e.row)}}))}var z=function(e){function t(t){var a;(a=e.call(this,t)||this).onNewProgram=function(){var e=new Date,t=""+(e.getMonth()+1),n=""+e.getDate(),r=e.getFullYear();t.length<2&&(t="0"+t),n.length<2&&(n="0"+n);var i=t+"-"+n+"-"+r,s={program_id:a.state.cards.length+1,program_name:"",program_enabled:!0,program_template:[],matrix_size:114,compression:"0",logo:"",card_image_front:"",card_image_back:"",edac:2,pxpcw:4,sampleWidth:4,created_date:i};Object(o.navigate)("/admin/card-programs/create",{state:s})},a.onTapSearch=function(){};var n=localStorage.getItem("user_role");return a.state={isLogin:!0,cards:[],status:"",program_name:"",create_roles:"Administrator"===n||"Program Manager"===n},a}Object(n.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.props;e.dispatch,e.userData,e.basicData},a.render=function(){var e=this,t=this.props;t.userData,t.classes;return i.a.createElement(S.a,{menuIndex:5},i.a.createElement(E.a,{container:!0,spacing:3,style:{maxWidth:900,marginLeft:"auto",marginRight:"auto"}},i.a.createElement(E.a,{item:!0,sm:6},i.a.createElement("div",{style:{paddingLeft:5,paddingRight:5,background:j.a.lightGray,maxWidth:300}},i.a.createElement(h.a,{style:{width:"100%"}},i.a.createElement(x.a,{htmlFor:"filled-basic"},"Card Program Name"),i.a.createElement(f.a,{id:"filled-basic",type:"text",value:this.state.program_name,variant:"filled",onChange:function(t){e.setState({program_name:t.target.value})},endAdornment:i.a.createElement(g.a,{position:"end"},i.a.createElement(l.a,{"aria-label":"toggle password visibility",onClick:this.onTapSearch,onMouseDown:this.onTapSearch},i.a.createElement(u.a,null)))})))),i.a.createElement(E.a,{item:!0,sm:4,xs:!1}),i.a.createElement(E.a,{item:!0,sm:2,xs:12},i.a.createElement(h.a,{fullWidth:!0},i.a.createElement(x.a,{id:"select-status"},"Status"),i.a.createElement(v.a,{labelId:"select-status",id:"select-status",value:this.state.status,fullWidth:!0,onChange:function(t){e.setState({status:t.target.value})}},i.a.createElement(w.a,{value:1},"Enabled"),i.a.createElement(w.a,{value:2},"Disabled")))),i.a.createElement(E.a,{item:!0,xs:12},i.a.createElement(W,{data:this.state.cards,program_name:this.state.program_name,status:this.state.status})),this.state.create_roles?i.a.createElement(E.a,{item:!0,md:3,sm:4,xs:12},i.a.createElement(p.a,{variant:"contained",size:"medium",color:"primary",fullWidth:!0,onClick:this.onNewProgram},"New Program")):null))},t}(i.a.Component);t.default=function(e){var t=Object(s.useDispatch)(),a=Object(s.useSelector)((function(e){return e.app.userData})),n=Object(d.a)();return i.a.createElement(z,Object.assign({},e,{dispatch:t,userData:a,classes:n}))}}}]);
//# sourceMappingURL=component---src-pages-admin-card-programs-index-js-47127ebfb5fcc09af7e6.js.map